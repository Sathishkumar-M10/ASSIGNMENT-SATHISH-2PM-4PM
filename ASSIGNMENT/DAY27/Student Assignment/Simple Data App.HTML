<!DOCTYPE html>
<html>
<head>
    <title>Simple Data App</title>
    <style>
        #postsContainer div {
            border: 1px solid #ccc;
            margin: 5px;
            padding: 5px;
        }
    </style>
</head>
<body>
    <h2>Simple Data App (Users)</h2>
    <button id="loadBtn">Load Users</button>
    <div id="postsContainer"></div>

    <script>
        const loadBtn = document.getElementById("loadBtn");
        const container = document.getElementById("postsContainer");

        loadBtn.addEventListener("click", () => {
            // New placeholder API for users
            fetch("https://jsonplaceholder.typicode.com/users")
                .then(response => {
                    if (!response.ok) {
                        throw new Error("Network response was not ok");
                    }
                    return response.json();
                })
                .then(users => {
                    // Clear previous posts
                    container.innerHTML = "";

                    users.forEach((user, index) => {
                        const userDiv = document.createElement("div");

                        const name = document.createElement("h3");
                        name.textContent = user.name;

                        const email = document.createElement("p");
                        email.textContent = "Email: " + user.email;

                        userDiv.appendChild(name);
                        userDiv.appendChild(email);
                        container.appendChild(userDiv);

                        // Save the first user name in localStorage
                        if (index === 0) {
                            localStorage.setItem("lastFirstUser", JSON.stringify(user.name));
                        }
                    });

                    // Retrieve and log the saved first user name
                    const savedName = JSON.parse(localStorage.getItem("lastFirstUser"));
                    console.log("Saved first user name:", savedName);
                })
                .catch(error => {
                    console.log("Error fetching users:", error.message);
                });
        });
    </script>
</body>
</html>
